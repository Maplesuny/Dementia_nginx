"use strict";(self["webpackChunkdementia"]=self["webpackChunkdementia"]||[]).push([[64],{5676:(e,l,t)=>{t.r(l),t.d(l,{default:()=>A});var a=t(3673),o=t(2323);const u={class:"flex full-width row wrap items-center margin_style"},i={key:0},r={key:0,class:"text-red"},n={key:1,class:"text-indigo"},d={key:2,class:"text-teal"},g={key:3},s={key:0},m={key:1},c=(0,a.Uk)(" LD*0.33 "),v={key:2};function p(e,l,t,p,_,b){const w=(0,a.up)("q-select"),h=(0,a.up)("q-btn"),f=(0,a.up)("q-tooltip"),y=(0,a.up)("q-td"),P=(0,a.up)("q-popup-edit"),C=(0,a.up)("q-table"),T=(0,a.up)("q-input"),D=(0,a.up)("q-list"),k=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(k,{"expand-separator":"",label:"藥物資訊",modelValue:p.TSRc,"onUpdate:modelValue":l[3]||(l[3]=e=>p.TSRc=e),class:"fit",style:(0,o.j5)(p.fontUP),"header-class":"bg-primary text-white","header-style":"border-radius: 3px","expand-icon-class":"text-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{style:{padding:"10px"}},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("div",{class:"q-ml-sm",style:(0,o.j5)(p.fontUP)},"選擇用藥資訊::",4),(0,a.Wm)(w,{class:"q-ml-sm",filled:"",modelValue:p.deementia.form.drug.total.value,"onUpdate:modelValue":l[0]||(l[0]=e=>p.deementia.form.drug.total.value=e),"use-input":"","use-chips":"",multiple:"","input-debounce":"0",options:p.filterOption4,onFilter:p.filterFn4,style:(0,o.j5)([{width:"100%"},p.fontUP]),dense:""},null,8,["modelValue","options","onFilter","style"])]),(0,a.Wm)(C,{style:(0,o.j5)(p.fontUP),dense:"",rows:p.test_rows,columns:p.ccolumns,"row-key":"name",pagination:{rowsPerPage:15}},{"body-cell-medcode":(0,a.w5)((e=>[(0,a.Wm)(y,{props:e,"vslot-scope":"props",clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{flat:"",style:{color:"blue"},href:"http://10.20.8.117/drugnetnew/BookInfo/DrugDetail.aspx?drugno="+e.value+"&queryby=intra",target:"_blank",label:e.value},null,8,["href","label"]),(0,a.Wm)(f,{anchor:"top middle",self:"bottom middle"},{default:(0,a.w5)((()=>[(0,a._)("strong",null,(0,o.zw)(e.value),1)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-timeout":(0,a.w5)((e=>[(0,a.Wm)(y,{key:"timeout",props:e,clickable:""},{default:(0,a.w5)((()=>["精神疾病藥物"==e.row.drug_type?((0,a.wg)(),(0,a.iD)("div",i,(0,o.zw)(e.row.timeout),1)):(0,a.kq)("",!0),"精神疾病藥物"==e.row.drug_type?((0,a.wg)(),(0,a.j4)(P,{key:1,modelValue:e.row.timeout,"onUpdate:modelValue":l=>e.row.timeout=l,modelModifiers:{string:!0},buttons:"","label-set":"Save","label-cancel":"Close",onHide:l=>p.update_status(e.row.generic_drug,e.row.timeout)},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{borderless:"",modelValue:e.row.timeout,"onUpdate:modelValue":l=>e.row.timeout=l,options:p.timeout_option},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])):(0,a.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["style","rows","columns"]),(0,a.Wm)(C,{class:"q-mt-md q-mb-xs",title:"PD藥物 轉換",style:(0,o.j5)(p.fontUP),dense:"",rows:p.AD_rows,columns:p.adcolumns,"row-key":"name",pagination:{rowsPerPage:15}},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(h,{color:"primary",disable:p.loading,label:"Convert",onClick:l[1]||(l[1]=e=>p.addRows(p.AD_rows))},null,8,["disable"])])),"body-cell-generic_drug":(0,a.w5)((e=>[(0,a.Wm)(y,{props:e,style:{color:"blue"},"vslot-scope":"props",clickable:""},{default:(0,a.w5)((()=>["沒有Entacapone (Comtan) :"==e.row.generic_drug?((0,a.wg)(),(0,a.iD)("div",r,(0,o.zw)(e.value),1)):(0,a.kq)("",!0),"有吃Entacapone (Comtan) :"==e.row.generic_drug?((0,a.wg)(),(0,a.iD)("div",n,(0,o.zw)(e.value),1)):(0,a.kq)("",!0),"LD :"==e.row.generic_drug?((0,a.wg)(),(0,a.iD)("div",d,(0,o.zw)(e.value),1)):(0,a.kq)("",!0),"LD :"!=e.row.generic_drug&&"有吃Entacapone (Comtan) :"!=e.row.generic_drug&&"沒有Entacapone (Comtan) :"!=e.row.generic_drug?((0,a.wg)(),(0,a.iD)("div",g,(0,o.zw)(e.value),1)):(0,a.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-dose_mg":(0,a.w5)((e=>[(0,a.Wm)(y,{key:"dose_mg",props:e,clickable:""},{default:(0,a.w5)((()=>[(0,a._)("div",null,(0,o.zw)(e.row.dose_mg),1),"LD :"!=e.row.generic_drug&&"有吃Entacapone (Comtan) :"!=e.row.generic_drug&&"沒有Entacapone (Comtan) :"!=e.row.generic_drug&&"Entacapone 200mg/Tab"!=e.row.generic_drug?((0,a.wg)(),(0,a.j4)(P,{key:0,title:"請輸入劑量",modelValue:e.row.dose_mg,"onUpdate:modelValue":l=>e.row.dose_mg=l,modelModifiers:{string:!0},buttons:"","label-set":"Save","label-cancel":"Close",onHide:l=>p.update_status(e.row.generic_drug,e.row.dose_mg)},{default:(0,a.w5)((()=>["Selegiline 10mg/Tab"==e.row.generic_drug?((0,a.wg)(),(0,a.j4)(w,{key:0,filled:"",label:"口服或舌下",modelValue:p.save_oral,"onUpdate:modelValue":l[2]||(l[2]=e=>p.save_oral=e),options:p.oral},null,8,["modelValue","options"])):(0,a.kq)("",!0),(0,a.Wm)(T,{style:{"margin-top":"3px"},filled:"",modelValue:e.row.dose_mg,"onUpdate:modelValue":l=>e.row.dose_mg=l,mask:"####"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["modelValue","onUpdate:modelValue","onHide"])):(0,a.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-convert_mg":(0,a.w5)((e=>[(0,a.Wm)(y,{key:"convert_mg",props:e},{default:(0,a.w5)((()=>["LD :"==e.row.generic_drug||"有吃Entacapone (Comtan) :"==e.row.generic_drug||"沒有Entacapone (Comtan) :"==e.row.generic_drug?((0,a.wg)(),(0,a.iD)("div",s,(0,o.zw)(e.row.convert_mg),1)):"Entacapone 200mg/Tab"==e.row.generic_drug?((0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(f,{style:(0,o.j5)(p.fontUP)},{default:(0,a.w5)((()=>[c])),_:1},8,["style"]),(0,a.Uk)(" "+(0,o.zw)(.33*p.count_LD),1)])):((0,a.wg)(),(0,a.iD)("div",v,(0,o.zw)(p.mg_drugname(e.row.generic_drug,e.row.dose_mg)),1))])),_:2},1032,["props"])])),_:1},8,["style","rows","columns"])])),_:1})])),_:1},8,["modelValue","style"])}t(71);var _=t(1959),b=t(8764),w=t(52),h=t.n(w),f=t(8825);const y={setup(){const{host:e,port:l}=(0,b.Z)(),t=(0,f.Z)(),o=(t.cookies.get("username"),(0,_.iH)(["是","否"])),u=(0,_.iH)(["口服","舌下"]),i=(0,_.iH)(""),r=(0,_.iH)({form:{user_id:{title:"使用者帳號",value:""},CaseNo:{title:"共照收案",value:""},CaseNum:{title:"收案編號",value:""},CaseDate:{title:"收案日期",value:""},ChartNo:{title:"病歷號碼",value:""},icdNo:{title:"診斷碼",value:null},PtName:{title:"中文姓名",value:""},idNo:{title:"身分證字號",value:""},birthday:{title:"生日",value:""},sex:{title:"性別",value:""},cellphone:{title:"手機號碼",value:""},contact_person:{title:"聯絡人",name:"",cellphone:"",home:""},phone:{title:"連絡電話",value:""},address:{title:"地址",value:""},height:{title:"身高",value:""},weight:{title:"體重",value:""},Ethnicity:{title:"種族",value:""},Ethnicity2:{title:"其他種族",value:""},Marital:{title:"婚姻狀態",value:""},education:{title:"教育程度",value:""},job:{title:"職業",value:"",other:""},Dementia:{title:"失智症診斷",value:""},Deementia_degree:{title:"失智程度",value:""},Dementia1:{title:"失智症類別",value:""},Dementia2:{title:"首次確診年齡",value:""},DFS:{title:"失智症家族病史",grandfather:{title:"祖父",value:!1,type:""},grandmother:{title:"祖母",value:!1,type:""},father:{title:"父親",value:!1,type:""},mother:{title:"母親",value:!1,type:""},wife:{title:"伴侶",value:!1,type:""},son:{title:"兒子",value:!1,type:""},daughter:{title:"女兒",value:!1,type:""},brother:{title:"兄弟",value:!1,type:""},sister:{title:"姊妹",value:!1,type:""},uncle:{title:"叔/伯/舅",value:!1,type:""},aunt:{title:"姑/姨/嬸",value:!1,type:""},other:{title:"其他家族成員",value:!1,name:"",type:""}},chronic:{title:"慢性病史",diabetes:{title:"糖尿病",value:!1},hypertension:{title:"高血壓",value:!1},stroke:{title:"腦中風",value:!1}},LTM:{title:"長期服用藥物",value:"",name:null},Drinking_habit:{title:"飲酒習慣",value:""},drug:{title:"用藥",Psychotropic:{title:"Psychotropic",value:null,timeout:null},total:{title:"Total",value:null}},drug_table:{title:"用藥資訊表格",rows:{name:"",generic_drug:"",drug_zhname:"",drug_type:"",timeout:""}},medical:{title:"醫學影像檢查",CT:{title:"CT",value:"",date:""},MRI:{title:"MRI",value:"",date:""},PET:{title:"PET",value:"",date:""},SPECT:{title:"SPECT",value:"",date:""}},Blood:{title:"全套血液檢查CBC",value:"",date:"",WBC:{title:"WBC",value:""},RBC:{title:"RBC",value:""},Hb:{title:"Hb",value:""},Hct:{title:"Hct",value:""},MCV:{title:"MCV",value:""},MCH:{title:"MCH",value:""},MCHC:{title:"MCHC",value:""},RDW:{title:"RDW",value:""},Platelet:{title:"Platelet",value:""},PDW:{title:"PDW",value:""},MPV:{title:"MPV",value:""}},MMSE:{title:"心智功能檢查",MMSE:{title:"MMSE",value:"",scores:"",date:""},CDR:{title:"CDR",value:"",scores:"",date:""},MoCA:{title:"MoCA",value:"",scores:"",date:""},NPI:{title:"NPI",value:"",scores:"",date:""},CASI:{title:"CASI",value:"",scores:"",date:""}},kidney:{title:"腎臟檢查",BUN:{title:"BUN",value:"",scores:"",date:""},Creatinine:{title:"Creatinine",value:"",scores:"",date:""}},liver:{title:"肝臟檢查",GOT:{title:"GOT",value:"",scores:"",date:""},GPT:{title:"GPT",value:"",scores:"",date:""}},Thyroid:{title:"甲狀腺檢查",T4:{title:"T4",value:"",scores:"",date:""},TSH:{title:"TSH",value:"",scores:"",date:""}},syphilis:{title:"梅毒血清檢測",VDRL:{title:"VDRL",value:"",scores:"",date:""}},BPSD:{title:"BPSD (失智症狀)",value:""},UPDRS:{title:"UPDRS",Mentation:{title:"Mentation, Behavior, Mood",med:"",value:"",scores:"",date:""},Activities:{title:" Activities of daily living",med:"",value:"",scores:"",date:""},Motor:{title:" Motor examination",med:"",value:"",scores:"",date:""},Complication:{title:"Complication of therapy",med:"",value:"",scores:"",date:""},total:null},YAHR:{title:"YAHR",value:"",scores:"",date:""},ADL:{title:"ADL",value:"",scores:"",date:""},Case_detection:{title:"收案檢測項目",brain:{title:"腦波",value:"",scores:"",date:""},face:{title:"臉部表情",value:"",scores:"",date:""},voice:{title:"語音",value:"",scores:"",date:""},gait:{title:"步態",value:"",scores:"",date:""}}}}),n=[{name:"medcode",required:!0,label:"藥品醫令碼",align:"center",field:e=>e.name,sortable:!1},{name:"generic_drug",align:"center",label:"藥品學名/規格",field:"generic_drug",sortable:!1},{name:"drug_zhname",align:"center",label:"藥品中文名稱",field:"drug_zhname",sortable:!1},{name:"drug_type",align:"center",label:"藥品類別",field:"drug_type",sortable:!1},{name:"timeout",align:"center",label:"是否超過3個月服用藥物",field:"timeout",sortable:!1}],d=[{name:"generic_drug",align:"center",label:"藥品學名/規格",field:"generic_drug",sortable:!0},{name:"dose_mg",align:"center",label:"dose(mg)",field:"dose_mg",sortable:!1},{name:"convert_mg",align:"center",label:"convert",field:"convert_mg",sortable:!1}],g=(0,_.iH)(""),s=(0,_.iH)(14);g.value=`font-size:${s.value}px`;const m=(0,_.iH)(!1),c=(0,_.iH)([]);async function v(){let t=`http://${e}:${l}/api/v1/getdrug?table=drug`;h().get(t).then((e=>{let l=e.data;for(let t=0;t<l.length;t++)c.value.push(`[${l[t]["medcode"]}] - ${l[t]["drug_name"]}`)}))}const p=(0,_.iH)(c.value),w=(0,_.iH)([]),y=(0,_.iH)([]),P=h().CancelToken;let C=P.source();function T(e,l){r.value.form.drug.Psychotropic.value=r.value.form.drug.Psychotropic.value+","+e,r.value.form.drug.Psychotropic.timeout=r.value.form.drug.Psychotropic.timeout+","+l}(0,a.YP)(r.value.form.drug.total,(()=>{var t,a;if(w.value=[],y.value=[],null===(t=C)||void 0===t||t.cancel("Operation canceled by the user."),C=P.source(),0!=r.value.form.drug.total.value.length)for(let o=0;o<r.value.form.drug.total.value.length;o++){console.log("total裡面的要有什麼",r.value.form.drug.total.value),console.log("場度",r.value.form.drug.total.value.length,o),a="[TMA-HBS] - Madopar HBS 125mg/Cap"==r.value.form.drug.total.value[o]?10:r.value.form.drug.total.value[o].indexOf("-"),console.log("index_",a);let t=r.value.form.drug.total.value[o].slice(a+2);console.log("要送進去查找藥的名字",t);let u=`http://${e}:${l}/api/v1/seach_drug?drug_name=${t}`;h().get(u,{cancelToken:C.token}).then((e=>{let l=e.data[0];console.log("search_drug",l);let t=l["drug_type"],a=l["medcode"],o=l["drug_name"],u=l["generic_drug"],i=l["drug_zhname"],r=l["magnification"];w.value.push({name:a,generic_drug:u,drug_name:o,drug_zhname:i,drug_type:t,timeout:"否"}),"PD"!=t&&"AD,PDD"!=t||y.value.push({generic_drug:u,dose_mg:"",convert_mg:0,magnification:r})}))}})),(0,a.YP)(w,(()=>{console.log("row",w.value)})),(0,a.YP)(y,(()=>{console.log("AD_rows",y.value,y.value.length)})),(0,a.bv)((()=>{v()}));const D=(0,_.iH)(!1),k=(0,_.iH)(0),M=(0,_.iH)(0),R=(0,_.iH)(["Madopar 200/50 Tab(複方)","Madopar HBS 125mg/Cap","Sinemet 25/100 Tab(複方)","Stalevo Tab(複方)","Numient ER 36.25/145 mg/Cap"]),H=(0,_.iH)(0);function S(e){for(let l=0;l<e.length;l++)console.log("count_total",e),console.log("看所選的PD藥物裡面它的劑量名稱",e[l]["generic_drug"]),R.value.indexOf(e[l]["generic_drug"])>-1&&("Madopar HBS 125mg/Cap"==e[l]["generic_drug"]?H.value=H.value+Number(.75*e[l]["dose_mg"]):H.value=H.value+Number(1*e[l]["dose_mg"])),"AMAntadine Sulphate 100mg/Tab"==e[l]["generic_drug"]&&(M.value=M.value+Number(1*e[l]["dose_mg"])),"Apomorphine HCL 10mg/mL 3mL/Pen"==e[l]["generic_drug"]&&(M.value=M.value+Number(10*e[l]["dose_mg"])),"Duodopa Intestinal Gel 7 cassettes/Box"==e[l]["generic_drug"]&&(M.value=M.value+Number(1.11*e[l]["dose_mg"])),"Madopar 200/50 Tab(複方)"==e[l]["generic_drug"]&&(M.value=M.value+Number(1*e[l]["dose_mg"])),"Madopar HBS 125mg/Cap"==e[l]["generic_drug"]&&(M.value=M.value+Number(.75*e[l]["dose_mg"])),"Numient ER 36.25/145 mg/Cap"==e[l]["generic_drug"]&&(M.value=M.value+Number(1*e[l]["dose_mg"])),"Pramipexole 0.25mg/Tab"==e[l]["generic_drug"]&&(M.value=M.value+Number(100*e[l]["dose_mg"])),"PraMipexole P.R.  0.375mg/Tab"==e[l]["generic_drug"]&&(M.value=M.value+Number(100*e[l]["dose_mg"])),"PRAMIPEXOLE P.R. 1.5mg/Tab"==e[l]["generic_drug"]&&(M.value=M.value+Number(100*e[l]["dose_mg"])),"Rasagiline 1mg/T "==e[l]["generic_drug"]&&(M.value=M.value+Number(100*e[l]["dose_mg"])),"Ropinirole 0.25mg/Tab"==e[l]["generic_drug"]&&(M.value=M.value+Number(20*e[l]["dose_mg"])),"Ropinirole 4mg Prolonged Release Tab"==e[l]["generic_drug"]&&(M.value=M.value+Number(20*e[l]["dose_mg"])),"ropinirole PD 8mg/Tab"==e[l]["generic_drug"]&&(M.value=M.value+Number(20*e[l]["dose_mg"])),"RoTigotine(4mg/24h) 9mg/Piece"==e[l]["generic_drug"]&&(M.value=M.value+Number(30*e[l]["dose_mg"])),"ROTIgotine(八mg/24h) 18mg/Piece"==e[l]["generic_drug"]&&(M.value=M.value+Number(30*e[l]["dose_mg"])),"Sinemet 25/100 Tab(複方)"==e[l]["generic_drug"]&&(M.value=M.value+Number(1*e[l]["dose_mg"])),"Stalevo Tab(複方)"==e[l]["generic_drug"]&&(M.value=M.value+Number(1*e[l]["dose_mg"])),"Selegiline 10mg/Tab"==e[l]["generic_drug"]&&("口服"==i.value?M.value=M.value+Number(10*e[l]["dose_mg"]):M.value=M.value+Number(80*e[l]["dose_mg"])),console.log("加起來的結果",M.value),"有吃Entacapone (Comtan) :"!=e[l]["generic_drug"]&&"沒有Entacapone (Comtan) :"!=e[l]["generic_drug"]&&"LD :"!=e[l]["generic_drug"]||E(e)}function N(e){D.value=!0,console.log("rowsss",e),console.log("nnnn",e),M.value=0,H.value=0,S(e),setTimeout((()=>{Math.floor(Math.random()*(y.value.length+2));const l=y.value[Math.floor(Math.random()*y.value.length)];if(console.log("row",l),l){console.log("我按下去之後convert_totla",M.value);const t={generic_drug:"沒有Entacapone (Comtan) :",dose_mg:"",convert_mg:M.value},a={generic_drug:"有吃Entacapone (Comtan) :",dose_mg:"",convert_mg:M.value+.33*H.value},o={generic_drug:"LD :",dose_mg:"",convert_mg:H.value};0===y.value.length&&(k.value=0),l.id=++k.value;const u={...o},i={...t},r={...a};console.log("newRow",i),y.value=[...y.value.slice(0,e.length),u,...y.value.slice(e.length)],y.value=[...y.value.slice(0,e.length),i,...y.value.slice(e.length)],y.value=[...y.value.slice(0,e.length),r,...y.value.slice(e.length)],console.log("addrow",y.value),D.value=!1}else t.notify({color:"negative",position:"top",message:"請新增PD藥物後再進行轉換"}),D.value=!1}),500)}function E(e){console.log("remove",e),e.length--,e.length--,e.length--}function V(e,l){return console.log("mg_drugname",e,l),"AMAntadine Sulphate 100mg/Tab"==e?1*l:"Apomorphine HCL 10mg/mL 3mL/Pen"==e?10*l:"Duodopa Intestinal Gel 7 cassettes/Box"==e?1.11*l:"Madopar 200/50 Tab(複方)"==e?1*l:"Madopar HBS 125mg/Cap"==e?.75*l:"Numient ER 36.25/145 mg/Cap"==e?1*l:"Pramipexole 0.25mg/Tab"==e||"PraMipexole P.R.  0.375mg/Tab"==e||"PRAMIPEXOLE P.R. 1.5mg/Tab"==e||"Rasagiline 1mg/T "==e?100*l:"Ropinirole 0.25mg/Tab"==e||"Ropinirole 4mg Prolonged Release Tab"==e||"ropinirole PD 8mg/Tab"==e?20*l:"RoTigotine(4mg/24h) 9mg/Piece"==e||"ROTIgotine(八mg/24h) 18mg/Piece"==e?30*l:"Sinemet 25/100 Tab(複方)"==e||"Stalevo Tab(複方)"==e?1*l:"Selegiline 10mg/Tab"==e?(console.log("進來了"),"口服"==i.value?10*l:80*l):void 0}return(0,a.YP)(H,(()=>{console.log("conut_LD",H.value)})),{timeout_option:o,mg_drugname:V,convet_total:M,count_LD:H,update_status:T,loading:D,rowCount:k,save_oral:i,oral:u,test_rows:w,AD_rows:y,fontUP:g,TSRc:m,merge_drug:c,get_drug:v,ccolumns:n,adcolumns:d,deementia:r,filterOption4:p,filterFn4(e,l){l((()=>{if(""===e)p.value=c.value;else{const l=e.toLowerCase();p.value=c.value.filter((e=>e.toLowerCase().indexOf(l)>-1))}}))},addRows:N}}};var P=t(4260),C=t(4615),T=t(7011),D=t(3017),k=t(8107),M=t(3884),R=t(8240),H=t(8870),S=t(6271),N=t(4522),E=t(4842),V=t(7518),x=t.n(V);const L=(0,P.Z)(y,[["render",p]]),A=L;x()(y,"components",{QExpansionItem:C.Z,QList:T.Z,QSelect:D.Z,QTable:k.Z,QTd:M.Z,QBtn:R.Z,QTooltip:H.Z,QCheckbox:S.Z,QPopupEdit:N.Z,QInput:E.Z})}}]);