"use strict";(self["webpackChunkdementia"]=self["webpackChunkdementia"]||[]).push([[286],{7286:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var a=s(3673),l=s(2323);const o=(0,a.Uk)("AI CENTER - Dementia"),n={class:"row no-wrap q-pa-md"},i={class:"column justify-center"},r=(0,a._)("div",{class:"text-h6 q-mb-md"},"Settings",-1),c=(0,a._)("div",{class:"text-h6"},"修改密碼",-1),u={class:"flex-center",style:{display:"flex","align-items":"center","flex-wrap":"wrap",flex:"1",margin:"8px"}},p=(0,a._)("div",null,"帳號:",-1),d={class:"q-gutter-sm",style:{flex:"1","max-width":"300px",margin:"8px"}},m={class:"flex-center",style:{display:"flex","align-items":"center","flex-wrap":"wrap",flex:"1",margin:"8px"}},_=(0,a._)("div",null,"新密碼:",-1),w={class:"q-gutter-sm",style:{flex:"1","max-width":"300px",margin:"8px"}},f={class:"flex-center",style:{display:"flex","align-items":"center","flex-wrap":"wrap",flex:"1",margin:"8px"}},h=(0,a._)("div",null,"確認密碼 :",-1),v={class:"q-gutter-sm",style:{flex:"1","max-width":"300px",margin:"8px"}},x={class:"column items-center"},g={class:"text-subtitle1 q-mt-md q-mb-xs"};function y(e,t,s,y,b,k){const q=(0,a.up)("q-toolbar-title"),W=(0,a.up)("q-btn"),Z=(0,a.up)("q-card-section"),Q=(0,a.up)("q-input"),C=(0,a.up)("q-icon"),V=(0,a.up)("q-card-actions"),H=(0,a.up)("q-form"),S=(0,a.up)("q-card"),U=(0,a.up)("q-dialog"),z=(0,a.up)("q-separator"),T=(0,a.up)("q-avatar"),R=(0,a.up)("q-menu"),A=(0,a.up)("q-toolbar"),E=(0,a.up)("q-header"),I=(0,a.up)("router-view"),L=(0,a.up)("q-page-container"),$=(0,a.up)("q-layout"),j=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)($,{view:"hHh Lpr lFf"},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{elevated:""},{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[o])),_:1}),(0,a.Wm)(W,{dense:"",label:"Account Settings"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,null,{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",i,[r,(0,a._)("div",null,"帳號:: "+(0,l.zw)(e.account),1),(0,a.Wm)(W,{color:"primary",label:"修改密碼",push:"",size:"sm",onClick:t[0]||(t[0]=t=>e.reset_status=!0)})]),(0,a.Wm)(U,{modelValue:e.reset_status,"onUpdate:modelValue":t[6]||(t[6]=t=>e.reset_status=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{style:{width:"500px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,null,{default:(0,a.w5)((()=>[c])),_:1}),(0,a.Wm)(H,{onSubmit:e.onSubmit,onReset:e.onReset,class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a._)("div",u,[p,(0,a._)("div",d,[(0,a.Wm)(Q,{modelValue:e.account,"onUpdate:modelValue":t[1]||(t[1]=t=>e.account=t),label:"帳號",dense:"",style:{width:"250px"},class:"q-mb-sm",readonly:"",disable:""},null,8,["modelValue"])])]),(0,a._)("div",m,[_,(0,a._)("div",w,[(0,a.Wm)(Q,{modelValue:e.reset_passed,"onUpdate:modelValue":t[3]||(t[3]=t=>e.reset_passed=t),label:"密碼",dense:"",type:e.rest_show_passwd?"text":"password",style:{width:"250px"},class:"q-mb-sm",rules:[e=>e&&e.length>0||"* 必填"]},{append:(0,a.w5)((()=>[(0,a.Wm)(C,{name:e.rest_show_passwd?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[2]||(t[2]=t=>e.rest_show_passwd=!e.rest_show_passwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"])])]),(0,a._)("div",f,[h,(0,a._)("div",v,[(0,a.Wm)(Q,{modelValue:e.reset_check_passwd,"onUpdate:modelValue":t[5]||(t[5]=t=>e.reset_check_passwd=t),label:"密碼",dense:"",type:e.reset_check_show_passwd?"text":"password",style:{width:"250px"},class:"q-mb-sm",rules:e.check_passwd},{append:(0,a.w5)((()=>[(0,a.Wm)(C,{name:e.reset_check_show_passwd?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[4]||(t[4]=t=>e.reset_check_show_passwd=!e.reset_check_show_passwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"])])]),(0,a.Wm)(V,{align:"right",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(W,{flat:"",label:"Cancel",type:"reset",cancel:""},null,512),[[j]]),(0,a.Wm)(W,{flat:"",label:"OK",type:"submit"})])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(z,{vertical:"",inset:"",class:"q-mx-lg"}),(0,a._)("div",x,[(0,a.Wm)(T,{size:"60px","text-color":"accent"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.pre_title),1)])),_:1}),(0,a._)("div",g,(0,l.zw)(e.account),1),(0,a.wy)((0,a.Wm)(W,{color:"primary",label:"Logout",push:"",size:"sm",onClick:t[7]||(t[7]=t=>e.logout())},null,512),[[j]])])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I)])),_:1})])),_:1})}var b=s(1959),k=s(8764),q=s(8825),W=s(52),Z=s.n(W);const Q=(0,a.aZ)({name:"MainLayout",setup(){const{host:e,port:t,refreshToken:s}=(0,k.Z)(),l=(0,b.iH)(!1),o=(0,q.Z)(),n=o.cookies.get("username"),i=o.cookies.get("name"),r=(0,b.iH)(""),c=(0,b.iH)(!1),u=(0,b.iH)(""),p=(0,b.iH)(""),d=(0,b.iH)(!1),m=(0,b.iH)(!1);function _(){localStorage.removeItem("access_token"),o.cookies.remove("username"),o.cookies.remove("name");const e=document.createElement("a");e.href="/login",e.click()}r.value=null==n?"":n.split("")[0].toUpperCase();let w=(0,b.iH)([e=>e&&e.length>0||"*必填",e=>e==u.value||"兩者密碼不同"]);function f(){let s=`http://${e}:${t}/api/v1/rest_passwd?account=${n}&passwd=${u.value}`;Z().post(s).then((e=>{"查無帳號"===e.data?o.notify({color:"negative",position:"top",message:e.data}):o.notify({icon:"done",color:"positive",position:"top",message:"重設密碼完成"})}))}function h(){u.value="",p.value=""}return(0,a.bv)((async()=>{const e=await s();if(l.value=e,!e){const e=document.createElement("a");e.href="/login",e.click()}})),{logout:_,name:i,account:n,isTokenValid:l,pre_title:r,reset_status:c,reset_passed:u,reset_check_passwd:p,rest_show_passwd:d,reset_check_show_passwd:m,check_passwd:w,onReset:h,onSubmit:f}}});var C=s(4260),V=s(3066),H=s(3812),S=s(9570),U=s(3747),z=s(8240),T=s(811),R=s(6778),A=s(151),E=s(5589),I=s(8689),L=s(4842),$=s(4554),j=s(9367),D=s(5869),F=s(5096),M=s(2652),P=s(677),B=s(7518),K=s.n(B);const N=(0,C.Z)(Q,[["render",y]]),O=N;K()(Q,"components",{QLayout:V.Z,QHeader:H.Z,QToolbar:S.Z,QToolbarTitle:U.Z,QBtn:z.Z,QMenu:T.Z,QDialog:R.Z,QCard:A.Z,QCardSection:E.Z,QForm:I.Z,QInput:L.Z,QIcon:$.Z,QCardActions:j.Z,QSeparator:D.Z,QAvatar:F.Z,QPageContainer:M.Z}),K()(Q,"directives",{ClosePopup:P.Z})}}]);