"use strict";(self["webpackChunkdementia"]=self["webpackChunkdementia"]||[]).push([[994],{9994:(e,a,o)=>{o.r(a),o.d(a,{default:()=>B});var l=o(3673),t=o(2323);const n={style:{height:"calc(100vh - 70px)","margin-top":"20px"}},s={class:"flex items-center q-mb-md justify-center"},i={class:"q-mr-sm"},r=(0,l.Uk)("新增案件"),d={style:{width:"30px"}},u=(0,l.Uk)(" 開啟 ");function c(e,a,o,c,m,p){const f=(0,l.up)("q-input"),w=(0,l.up)("q-date"),g=(0,l.up)("q-popup-proxy"),v=(0,l.up)("q-btn"),b=(0,l.up)("q-td"),y=(0,l.up)("q-tooltip"),h=(0,l.up)("q-table"),P=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(P,{class:"flex flex-center column"},{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l._)("div",s,[(0,l.Wm)(f,{filled:"",label:"病歷號",modelValue:c.PID,"onUpdate:modelValue":a[0]||(a[0]=e=>c.PID=e),class:"q-mr-md"},null,8,["modelValue"]),(0,l.Wm)(f,{filled:"",label:"身分證",modelValue:c.IID,"onUpdate:modelValue":a[1]||(a[1]=e=>c.IID=e),class:"q-mr-md"},null,8,["modelValue"]),(0,l.Wm)(f,{filled:"",label:"醫師姓名",modelValue:c.doctor,"onUpdate:modelValue":a[2]||(a[2]=e=>c.doctor=e),class:"q-mr-md"},null,8,["modelValue"]),(0,l._)("div",i," 收案日期: "+(0,t.zw)(c.dateRange.from)+" - "+(0,t.zw)(c.dateRange.to),1),(0,l.Wm)(v,{icon:"event",round:"",color:"primary"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{onBeforeShow:c.updateProxy,onHide:c.saveProxy,"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{modelValue:c.dateRangeProxy,"onUpdate:modelValue":a[3]||(a[3]=e=>c.dateRangeProxy=e),range:""},null,8,["modelValue"])])),_:1},8,["onBeforeShow","onHide"])])),_:1}),(0,l.Wm)(v,{icon:"search",round:"",flat:"",class:"q-ml-md",onClick:a[4]||(a[4]=e=>c.onRequest({pagination:c.pagination,filter:void 0}))}),(0,l.Wm)(v,{flat:"",class:"q-ml-sm",onClick:c.addCase},{default:(0,l.w5)((()=>[r])),_:1},8,["onClick"])]),(0,l.Wm)(h,{class:"my-sticky-dynamic",rows:c.rows,columns:c.columns,pagination:c.pagination,"onUpdate:pagination":a[5]||(a[5]=e=>c.pagination=e),loading:c.loading,onRequest:c.onRequest,"binary-state-sort":"",style:{width:"1300px"}},{"body-cell-id":(0,l.w5)((e=>[(0,l.Wm)(b,{props:e,"vslot-scope":"props"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,t.zw)(e.row.show_id),1)])),_:2},1032,["props"])])),"body-cell-CaseNum":(0,l.w5)((e=>[(0,l.Wm)(b,{props:e,"vslot-scope":"props",class:"flex items-center"},{default:(0,l.w5)((()=>[(0,l._)("div",d,(0,t.zw)(e.value),1),(0,l.Wm)(v,{class:"q-ml-md bg-primary text-white",flat:"",onClick:a=>c.rowclick(e.row.CaseNum,e.row.ChartNo,e.row.PtName)},{default:(0,l.w5)((()=>[u])),_:2},1032,["onClick"]),(0,l.Wm)(y,{anchor:"top middle",self:"bottom middle",offset:[10,10]},{default:(0,l.w5)((()=>[(0,l._)("strong",null,(0,t.zw)(e.row.CaseNum),1)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-Dementia1":(0,l.w5)((e=>[(0,l.Wm)(b,{props:e,"vslot-scope":"props",style:{width:"100px"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,t.zw)(e.row.Dementia1),1)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","loading","onRequest"])])])),_:1})}o(9544),o(71);var m=o(1959),p=o(8825),f=(o(4584),o(52)),w=o.n(f),g=o(9582),v=o(8764);o(5616),o(476);const b=[{name:"id",align:"center",label:"流水號",field:"id",sortable:!0},{name:"CaseNum",required:!0,label:"收案編號",align:"center",field:e=>e.CaseNum,format:e=>`${e}`,sortable:!0},{name:"CaseDate",required:!0,label:"收案日期",align:"center",field:"CaseDate",sortable:!0},{name:"ChartNo",align:"center",label:"病歷號",field:"ChartNo",sortable:!0},{name:"PtName",align:"center",label:"中文姓名",field:"PtName"},{name:"idNo",align:"center",label:"身分證",field:"idNo"},{name:"doctor",align:"center",label:"診療醫師",field:"doctor"},{name:"Dementia1",align:"center",label:"失智症診斷",field:"Dementia1"}];let y=(0,m.iH)([]);const h=(0,m.iH)([]),P=(0,m.iH)([]),q=(0,m.iH)({page:1,rowsPerPage:100,rowsNumber:0,sortBy:"show_id",descending:!1});h.value=[];const C={setup(){(0,p.Z)();const{host:e,port:a,todays:o}=(0,v.Z)(),t=(0,m.iH)(""),n=(0,m.iH)(""),s=(0,m.iH)(""),i=((0,g.tv)(),(0,m.iH)({})),r=(0,m.iH)({}),d=(0,m.iH)(!1);function u(e){const{page:a,rowsPerPage:o,sortBy:l,descending:r}=e.pagination;e.filter;d.value=!0;const u=0===o?q.value.rowsNumber:o,m=(a-1)*o;setTimeout((()=>{c(m,u,{ChartNo:t.value,idNo:n.value,doctor:s.value,CasedateFrom:i.value.from,CasedateTo:i.value.to},l,r).then((e=>{const t=e.rows;console.log("returnedData",t),y.value.splice(0,y.value.length,...t),h.value.splice(0,h.value.length,...e.most_code),q.value.page=a,q.value.rowsPerPage=o,q.value.sortBy=l,q.value.descending=r,q.value.rowsNumber=e.count})).finally((()=>{d.value=!1}))}),200)}async function c(o,l,t,n,s){const i=[];let r=`http://${e}:${a}/api/v1/gettable`;const d=await w().post(r,{startRow:o,count:l,filter:null!==t&&void 0!==t?t:{},sortBy:n,descending:s});return{rows:d.data.rows,count:d.data.count,most_code:i}}function f(e){return e}async function C(e,a,o){let l=document.createElement("a");l.href=`/table/${e}/${o}`,l.click()}function _(){let e=document.createElement("a");e.href="/addCase",e.click()}function x(){r.value=i.value}function k(){i.value=r.value}return(0,l.YP)(y.value,(()=>{})),(0,l.YP)(i,(()=>{})),(0,l.bv)((()=>{i.value.from="2000-01-01",i.value.to=o(),u({pagination:q.value,filter:void 0})})),{doctor:s,IID:n,PID:t,columns:b,addCase:_,loading:d,rows:(0,m.iH)(y),dateRange:i,dateRangeProxy:r,updateProxy:x,saveProxy:k,most_code:h,most_code_select:P,pagination:q,onRequest:u,rowclick:C,model:(0,m.iH)(null),drug_show:f}}};var _=o(4260),x=o(4379),k=o(4842),N=o(8240),D=o(3944),H=o(2651),W=o(3017),R=o(8107),V=o(3884),Z=o(8870),I=o(7518),Q=o.n(I);const U=(0,_.Z)(C,[["render",c]]),B=U;Q()(C,"components",{QPage:x.Z,QInput:k.Z,QBtn:N.Z,QPopupProxy:D.Z,QDate:H.Z,QSelect:W.Z,QTable:R.Z,QTd:V.Z,QTooltip:Z.Z})}}]);