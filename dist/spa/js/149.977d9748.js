"use strict";(self["webpackChunkdementia"]=self["webpackChunkdementia"]||[]).push([[149],{5149:(e,s,a)=>{a.r(s),a.d(s,{default:()=>O});var t=a(3673),l=a(2323),o=a(8880);const n=e=>((0,t.dD)("data-v-70a44fd1"),e=e(),(0,t.Cn)(),e),i=(0,t.Uk)("失智平台"),u={class:"card card-container"},r=n((()=>(0,t._)("img",{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",class:"profile-img-card"},null,-1))),d={class:"form-group ;vertical-center;"},c=n((()=>(0,t._)("label",{for:"username"},"Username",-1))),p={class:"form-group"},m=n((()=>(0,t._)("label",{for:"password"},"Password",-1))),w={class:"form-group"},f=n((()=>(0,t._)("br",null,null,-1))),_={class:"row justify-center",style:{"margin-bottom":"5px"}},v={key:0,style:{display:"flex",color:"blue","justify-content":"center","align-items":"center","font-weight":"bolder"}};function g(e,s,a,n,g,b){const h=(0,t.up)("q-toolbar-title"),y=(0,t.up)("q-toolbar"),k=(0,t.up)("q-header"),q=(0,t.up)("q-input"),Z=(0,t.up)("q-icon"),H=(0,t.up)("q-btn"),C=(0,t.up)("q-form"),Q=(0,t.up)("q-page-container"),W=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.j4)(W,{view:"lHh Lpr lFf"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{elevated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[i])),_:1}),(0,t._)("div",null,"Quasar v"+(0,l.zw)(e.$q.version),1)])),_:1})])),_:1}),(0,t.Wm)(Q,null,{default:(0,t.w5)((()=>[(0,t._)("div",u,[r,(0,t.Wm)(C,{onKeyup:s[5]||(s[5]=(0,o.D2)((e=>n.login(n.username,n.passwd)),["enter"]))},{default:(0,t.w5)((()=>[(0,t._)("div",d,[c,(0,t.Wm)(q,{modelValue:n.username,"onUpdate:modelValue":s[0]||(s[0]=e=>n.username=e),label:"帳號",filled:"",dense:"",style:{width:"250px"},class:"q-mb-sm",autocomplete:""},null,8,["modelValue"])]),(0,t._)("div",p,[m,(0,t.Wm)(q,{modelValue:n.passwd,"onUpdate:modelValue":s[2]||(s[2]=e=>n.passwd=e),label:"密碼",filled:"",dense:"",type:n.showPasswd?"text":"password",style:{width:"250px"},class:"q-mb-sm",autocomplete:""},{append:(0,t.w5)((()=>[(0,t.Wm)(Z,{name:n.showPasswd?"visibility":"visibility_off",class:"cursor-pointer",onClick:s[1]||(s[1]=e=>n.showPasswd=!n.showPasswd)},null,8,["name"])])),_:1},8,["modelValue","type"])]),(0,t._)("div",w,[(0,t.Wm)(H,{label:"登入",style:{width:"250px"},class:"q-mb-sm",onClick:s[3]||(s[3]=e=>n.login(n.username,n.passwd))}),f,(0,t._)("div",_,[(0,t.Wm)(H,{flat:"",label:"忘記密碼",onClick:s[4]||(s[4]=e=>n.reset_status=!n.reset_status)})])])])),_:1}),1==n.reset_status?((0,t.wg)(),(0,t.iD)("p",v," 請洽AI中心系統組，院內分機:2585 ")):(0,t.kq)("",!0)])])),_:1})])),_:1})}var b=a(1959),h=a(8825),y=a(1701),k=(a(2749),a(4584)),q=a(8764),Z=a(52),H=a.n(Z);a(476);const C={name:"login",setup(){const{dialogRef:e,onDialogHide:s,onDialogOK:a,onDialogCancel:l}=(0,y.Z)(),{refreshToken:o}=(0,q.Z)(),{host:n,port:i}=(0,q.Z)(),u=(0,h.Z)(),r=(0,b.iH)(""),d=(0,b.iH)(""),c=(0,b.iH)(!1),p=(0,b.iH)(""),m=(0,b.iH)(""),w=(0,b.iH)(""),f=(0,b.iH)(!1),_=(0,b.iH)(!1),v=(0,b.iH)(!1);async function g(e,s){k["default"].dispatch("LOGIN",{username:e,password:s})}let Z=(0,b.iH)([e=>e&&e.length>0||"*必填",e=>e==m.value||"兩者密碼不同"]);function C(){}function Q(){if(""==p.value||null==p.value)u.notify({color:"negative",position:"top",message:"尚有欄位未填寫"});else{let e=`http://${n}:${i}/api/v1/rest_passwd?account=${p.value}&passwd=${m.value}`;H().post(e).then((e=>{"查無帳號"===e.data?u.notify({color:"negative",position:"top",message:e.data}):(u.notify({icon:"done",color:"positive",position:"top",message:"重設密碼完成",timeout:2e3}),v.value=!1)}))}}function W(){p.value="",m.value="",w.value=""}return(0,t.bv)((async()=>{const e=await o();if(e){const e=document.createElement("a");e.href="/table",e.click()}})),{onsubmit2:C,username:r,passwd:d,showPasswd:c,login:g,onSubmit:Q,onReset:W,check_passwd:Z,reset_status:v,account:p,reset_passed:m,reset_check_passwd:w,rest_show_passwd:f,reset_check_show_passwd:_,onDialogOK:a,onCancelClick:l}}};var Q=a(4260),W=a(3066),x=a(3812),D=a(9570),P=a(3747),V=a(2652),I=a(8689),$=a(4842),T=a(4554),U=a(8240),j=a(7518),K=a.n(j);const L=(0,Q.Z)(C,[["render",g],["__scopeId","data-v-70a44fd1"]]),O=L;K()(C,"components",{QLayout:W.Z,QHeader:x.Z,QToolbar:D.Z,QToolbarTitle:P.Z,QPageContainer:V.Z,QForm:I.Z,QInput:$.Z,QIcon:T.Z,QBtn:U.Z})}}]);